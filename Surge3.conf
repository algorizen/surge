[General]
# 日志等级: warning, notify, info, verbose (默认值: notify)
loglevel = notify
# 跳过某个域名或者 IP 段，这些目标主机将不会由 Surge Proxy 处理。
# (macOS 版本中，如果启用了 Set as System Proxy, 这些值会被写入到系统网络代理设置.)
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8, localhost, *.local, 169.254.0.0/16, 224.0.0.0/4, 240.0.0.0/4
# 强制使用特定的 DNS 服务器
dns-server = 116.62.218.19, 139.196.72.143, 119.29.29.29, 119.28.28.28, 1.2.4.8, 182.254.116.116
# 允许外部控制器访问 Surge，Surge Dashboard 或 Surge CLI 进行管理控制
external-controller-access = 6677@0.0.0.0:6170
# 是否启动完整的 IPv6 支持 (默认值: false)
ipv6 = true
# TUN规则匹配模式 (默认值: false) macOS Only
enhanced-mode-by-rule = false
# 拒绝页面显示错误
show-error-page-for-reject = true
# 不包括简单主机名
exclude-simple-hostnames = true
# Surge 作为 HTTP/SOCKS5 代理服务器向 Wi-Fi 网络下的其他设备提供服务器
allow-wifi-access = true
# Surge iOS 供外网访问的服务端口
# HTTP 代理服务端口 (默认值: 6152)
wifi-access-http-port = 6152
# SOCKS5 代理服务端口 (默认值: 6153)
wifi-access-socks5-port = 6153
# Surge Mac 供外网访问的服务端口
# HTTP 服务端口 (默认值: 6152)
http-listen = 0.0.0.0
# SOCKS5 服务端口 (默认值: 6153)
socks5-listen = 0.0.0.0
# 启用 Network.framework (默认值: false)
network-framework = true
# INTERNET 测试 URL (使用网络诊断功能时访问的 URL)
internet-test-url = http://www.bing.com/
# 代理测速 URL (测试代理策略时的 URL)
proxy-test-url = http://www.bing.com/
# 测速超时 (秒)
test-timeout = 5

# 定义抓取流量的过滤
[Replica]
# 隐藏所有发往 *.Apple.com 和 *.icloud.com 的请求（该选项只是在抓取结果中隐藏了请求）
hide-apple-request = true
# 隐藏 Crashlytics 请求
hide-crashlytics-request = true
# 隐藏UDP会话（默认值: false）
hide-udp = false
# 使用关键词过滤器（默认值: false）
use-keyword-filter = false
# 仅记录不包含关键字的请求
# keyword-filter-type = blacklist
# 仅记录包含关键字的请求
# keyword-filter-type = whitelist
# 关键字 (例：abc def)
# keyword-filter = abc,def

[Proxy]

[Proxy Group]
PROXY = select, policy-path=proxy-list/proxy.list
PROXY-CN = select, policy-path=proxy-list/proxy-cn.list
APPLE = select, DIRECT, PROXY, PROXY-CN
DOMESTIC = select, DIRECT, PROXY-CN

[Rule]
# DOMAIN-SUFFIX,github.com,DIRECT,notification-text="Welcome to GitHub."
# CUSTOM RULE
# RULESET
# 内置了两个规则集：SYSTEM 和 LAN
# 内置规则集的具体内容可在 Surge Mac 设置界面查看
RULE-SET,SYSTEM,DIRECT
# Reject
RULE-SET,https://github.com/algorizen/surge-list/blob/master/reject.list,REJECT
# Proxy
RULE-SET,https://github.com/algorizen/surge-list/blob/master/blocked.list,PROXY
RULE-SET,https://github.com/algorizen/surge-list/blob/master/im.list,PROXY
# Selectable
RULE-SET,https://github.com/algorizen/surge-list/blob/master/apple.list,APPLE
RULE-SET,https://github.com/algorizen/surge-list/blob/master/stream.list,PROXY
# Direct and Domestic
RULE-SET,https://github.com/algorizen/surge-list/blob/master/cn.list,DOMESTIC
RULE-SET,LAN,DIRECT
# GeoIP CN，基于 GeoIP 数据库判断域名和 IP 的归属地
GEOIP,CN,DIRECT
# DNS 查询失败走 Final 规则
FINAL,PROXY,dns-failed

# 定义本地 DNS 记录
# 该功能等同于 /etc/hosts, 加上了泛解析和别名支持
[Host]
ip6-localhost = ::1
ip6-loopback = ::1
taobao.com = server:223.6.6.6
*.taobao.com = server:223.6.6.6
tmall.com = server:223.6.6.6
*.tmall.com = server:223.6.6.6
jd.com = server:119.29.29.29
*.jd.com = server:119.28.28.28
*.qq.com = server:119.28.28.28
*.tencent.com = server:119.28.28.28
*.alicdn.com = server:223.5.5.5
aliyun.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
weixin.com = server:119.28.28.28
*.weixin.com = server:119.28.28.28
bilibili.com = server:119.29.29.29
*.bilibili.com = server:119.29.29.29
163.com = server:119.29.29.29
*.163.com = server:119.29.29.29
126.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
mi.com = server:119.29.29.29
*.mi.com = server:119.29.29.29
xiaomi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29

# 定义针对 HTTP 请求的 URL 重定向规则
[URL Rewrite]
# Redirect Google Service
^https?:\/\/(www.)?g\.cn https://www.google.com 302
^https?:\/\/(www.)?google\.cn https://www.google.com 302
# Redirect HTTP to HTTPS
^https?:\/\/(www.)?taobao\.com\/ https://www.taobao.com/ 302
^https?:\/\/(www.)?jd\.com\/ https://www.jd.com/ 302
^https?:\/\/(www.)?mi\.com\/ https://www.mi.com/ 302
^https?:\/\/you\.163\.com\/ https://you.163.com/ 302
^https?:\/\/(www.)?suning\.com/ https://suning.com/ 302
^https?:\/\/(www.)?yhd\.com https://yhd.com/ 302
# Redirect False to True
# JD Protection
^https?:\/\/coupon\.m\.jd\.com\/ https://coupon.m.jd.com/ 302
^https?:\/\/h5\.m\.jd\.com\/ https://h5.m.jd.com/ 302
^https?:\/\/item\.m\.jd\.com\/ https://item.m.jd.com/ 302
^https?:\/\/m\.jd\.com\/ https://m.jd.com/ 302
^https?:\/\/newcz\.m\.jd\.com\/ https://newcz.m.jd.com/ 302
^https?:\/\/p\.m\.jd\.com\/ https://p.m.jd.com/ 302
^https?:\/\/so\.m\.jd\.com\/ https://so.m.jd.com/ 302
^https?:\/\/union\.click\.jd\.com\/jda? http://union.click.jd.com/jda?adblock= header
^https?:\/\/union\.click\.jd\.com\/sem.php? http://union.click.jd.com/sem.php?adblock= header
^https?:\/\/www.jd.com\/ https://www.jd.com/ 302
# Wiki
^https://zh.(m.)?wikipedia.org/zh(-\w*)?(?=/) https://www.wikiwand.com/zh$2 302
^https://(\w*).(m.)?wikipedia.org/wiki https://www.wikiwand.com/$1 302
# Advertising Block
# >> 4gTV
^https?:\/\/service\.4gtv\.tv\/4gtv\/Data\/GetAD - reject
^https?:\/\/service\.4gtv\.tv\/4gtv\/Data\/ADLog - reject
# >> 58
^https?:\/\/app\.58\.com\/api\/home\/advertising\/ - reject
^https?:\/\/app\.58\.com\/api\/home\/appadv\/ - reject
^https?:\/\/app\.58\.com\/api\/home\/invite\/popupAdv - reject
^https?:\/\/app\.58\.com\/api\/log\/ - reject
# >> AcFun
^https?:\/\/aes\.acfun\.cn\/s\?adzones - reject
# >> Baicizhan
^https?:\/\/7n\.bczcdn\.com\/launchad\/ - reject
# >> Baidu
^https?:\/\/update\.pan\.baidu\.com\/statistics - reject
^https?:\/\/issuecdn\.baidupcs\.com\/issue\/netdisk\/guanggao\/ - reject
# >> ByteDance
^https?:\/\/.+\.pstatp\.com\/img\/ad - reject
^https?:\/\/.+\.snssdk\.com\/api\/ad\/ - reject
^https?:\/\/dsp\.toutiao\.com\/api\/xunfei\/ads\/ - reject
# >> Chelaile
^https?:\/\/(api|atrace)\.chelaile\.net\.cn\/adpub\/ - reject
^https?:\/\/api\.chelaile\.net\.cn\/goocity\/advert\/ - reject
^https?:\/\/atrace\.chelaile\.net\.cn\/exhibit\?&adv_image - reject
^https?:\/\/pic1\.chelaile\.net\.cn\/adv\/ - reject
# >> China CITIC Bank
^https?:\/\/creditcard\.ecitic\.com\/citiccard\/wtk\/piwik\/piwik\.php - reject
^https?:\/\/m\.creditcard\.ecitic\.com\/citiccard\/mbk\/appspace-getway\/getWay\/appspace-system-web\/cr\/v5\/appStartAdv - reject
# >> China Merchants Bank
^https?:\/\/mlife\.cmbchina\.com/ClientFaceService\/preCacheAdvertise\.json - reject
^https?:\/\/mlife\.cmbchina\.com\/ClientFaceService\/getAdvertisement\.json - reject
# >> China Minsheng Bank
^https?:\/\/www\.cmbc\.com\.cn\/m\/image\/loadingpage\/ - reject
# >> ChinaMobile
^https?:\/\/app\.10086\.cn\/biz-orange\/DN\/homeSale\/getsaleAdver - reject
^https?:\/\/app\.10086\.cn\/biz-orange\/DH\/findSale\/getsaleAdver - reject
# >> ChinaUnicom
^https?:\/\/m\.client\.10010\.com\/mobileService\/customer\/accountListData\.htm - reject
^https?:\/\/m\.client\.10010\.com\/uniAdmsInterface\/(getWelcomeAd|getHomePageAd) - reject
# >> CNTV
^https?:\/\/cntv\.hls\.cdn\.myqcloud\.com\/.+\?maxbr=850 - reject
^https?:\/\/asp\.cntv\.myalicdn\.com\/.+\?maxbr=850 - reject
^https?:\/\/www\.cntv\.cn\/nettv\/adp\/ - reject
^https?:\/\/v\.cctv\.com\/.+850 - reject
^https?:\/\/mapi\.dangdang\.com\/index\.php\?action=init - reject
# >> Douban
^https?:\/\/api\.douban\.com\/v2\/app_ads\/ - reject
^https?:\/\/erebor\.douban\.com\/count\/\?ad= - reject
^https?:\/\/frodo\.douban\.com\/.+ad - reject
^https?:\/\/.+\.doubanio\.com\/view\/dale-online\/dale_ad/ - reject
^https?:\/\/rtbapi\.douyucdn\.cn\/japi\/sign\/app\/getinfo - reject
# >> Facebook
^https?:\/\/www\.facebook\.com\/.+video_click_to_advertiser_site - reject
# >> Google
^https?:\/\/.+\.youtube\.com\/api\/stats\/.+adformat - reject
^https?:\/\/.+\.youtube\.com\/api\/stats\/ads - reject
^https?:\/\/.+\.youtube\.com\/get_midroll - reject
^https?:\/\/.+\.youtube\.com\/pagead\/ - reject
^https?:\/\/.+\.youtube\.com\/ptracking\? - reject
^https?:\/\/pagead2.googlesyndication.com\/pagead\/js\/? - reject
^https?:\/\/premiumyva\.appspot\.com\/vmclickstoadvertisersite - reject
^https?:\/\/www.google-analytics.com\/analytics.js - reject
^https?:\/\/youtubei\.googleapis\.com/.+ad_break - reject
# >> Hupu
^https?:\/\/games\.mobileapi\.hupu\.com\/.+\/status\/init - reject
^https?:\/\/games\.mobileapi\.hupu\.com\/.+\/interfaceAdMonitor\/ - reject

^https?:\/\/pagead2.googlesyndication.com\/pagead\/js\/? - reject
^https?:\/\/www.google-analytics.com\/analytics.js - reject
# >> iFlytek
^https?:\/\/imeclient\.openspeech\.cn\/adservice\/ - reject
# >> iQiyi
^https?:\/\/iface\.iqiyi\.com\/api\/getNewAdInfo - reject
^https?:\/\/t7z\.cupid\.iqiyi\.com\/mixer\? - reject
# >> JD
^https?:\/\/api\.m\.jd.com\/client\.action\?functionId=start - reject
^https?:\/\/(bdsp-x|dsp-x)\.jd\.com\/adx\/ - reject
^https?:\/\/ms\.jr\.jd\.com\/gw\/generic\/base\/na\/m\/adInfo - reject
# >> Keep
^https?:\/\/static1\.keepcdn\.com\/.+\d{3}x\d{4} - reject
# >> KFC
^https?:\/\/res\.kfc\.com\.cn\/advertisement\/ - reject
# >> Kingsoft
^https?:/\/\counter\.ksosoft.com\/ad\.php - reject
^https?:\/\/ios\.wps\.cn\/ad-statistics-service - reject
^https?:\/\/mobile-pic\.cache\.iciba\.com\/feeds_ad\/ - reject
^https?:\/\/.+\.kingsoft-office-service\.com\/ad - reject
^https?:\/\/dict-mobile\.iciba\.com\/interface\/index\.php\?.+(c=ad|collectFeedsAdShowCount|KSFeedsAdCardViewController) - reject
^https?:\/\/service\.iciba\.com\/popo\/open\/screens\/v3\?adjson - reject
# >> Meituan
^https?:\/\/img\.meituan\.net\/midas\/ - reject
^https?:\/\/p([0-9])\.meituan\.net\/(mmc|wmbanner)\/ - reject
# >> MI
^https?:\/\/api\.m\.mi\.com\/v1\/app\/start - reject
^https?:\/\/api\.jr\.mi\.com\/v1\/adv\/ - reject
# >> NetEase
^https?:\/\/oimage([a-z])([0-9])\.ydstatic\.com\/.+adpublish - reject
^https?:\/\/dsp-impr2\.youdao\.com\/adload.s\? - reject
^https?:\/\/c\.m\.163\.com\/nc\/gl\/ - reject
^https?:\/\/client\.mail\.163\.com\/apptrack\/confinfo\/searchMultiAds - reject
^https?:\/\/.+\/eapi\/(ad|log)\/ - reject
^https?:\/\/sp\.kaola\.com\/api\/openad - reject
^https?:\/\/support\.you\.163\.com\/xhr\/boot\/getBootMedia\.json - reject
# >> Qdaily
^https?:\/\/app3\.qdaily\.com\/app3\/boot_advertisements\.json - reject
^https?:\/\/notch\.qdaily\.com\/api\/v2\/boot_ad - reject
# >> Sina
^https?:\/\/edit\.sinaapp\.com\/ua\?t=adv - reject
# >> Sina Weibo
^https?:\/\/sdkapp\.uve\.weibo\.com\/interface\/sdk\/sdkad\.php - reject
^https?:\/\/wbapp\.uve\.weibo\.com\/wbapplua\/wbpullad\.lua - reject
^https?:\/\/sdkapp\.uve\.weibo\.com/\interface\/sdk\/actionad\.php - reject
# >> SMZDM
^https?:\/\/api\.smzdm\.com\/v1\/util\/loading - reject
# >> Sohu
^https?:\/\/api\.k\.sohu\.com\/api\/news\/adsense - reject
^https?:\/\/pic\.k\.sohu\.com\/img8\/wb\/tj\/ - reject
^https?:\/\/hui\.sohu\.com\/predownload2/\? - reject
# >> Tencent Futu Securities
^https?:\/\/api5\.futunn\.com\/ad\/ - reject
# >> Tencent Game
^https?:\/\/ssl\.kohsocialapp\.qq\.com:10001\/game\/buttons - reject
^https?:\/\/qt\.qq\.com\/lua\/mengyou\/get_splash_screen_info - reject
# >> Tencent Maps
^https?:\/\/newsso\.map\.qq\.com\/\?&attime= - reject
# >> Tencent News
^https?:\/\/r\.inews\.qq\.com\/getFullScreenPic - reject
^https?:\/\/r\.inews\.qq\.com\/adsBlacklist - reject
^https?:\/\/r\.inews\.qq\.com\/getQQNewsRemoteConfig - reject
# >> Tencent QQLive
^https?:\/\/btrace.qq.com - reject
^https?:\/\/vv\.video\.qq\.com\/getvmind\? - reject
^https?:\/\/.+\.mp4\?cdncode=.+&guid= - reject
# >> Tencent WeChat
^https?:\/\/mp\.weixin\.qq.com\/mp\/ad_complaint - reject
^https?:\/\/mp\.weixin\.qq.com\/mp\/advertisement_report - reject
^https?:\/\/mp\.weixin\.qq.com\/mp\/ad_video - reject
# >> Thunder
^https?:\/\/images\.client\.vip\.xunlei\.com\/.+\/advert\/ - reject
# >> TV_Home
^https?:\/\/api\.gaoqingdianshi\.com\/api\/v2\/ad\/ - reject
# >> Xiami music
^https?:\/\/acs\.m\.taobao\.com\/gw\/mtop\.alimusic\.common\.mobileservice\.startinit\/ - reject
# >> Xianyu
^https?:\/\/gw\.alicdn\.com\/mt\/ - reject
^https?:\/\/gw\.alicdn\.com\/tfs\/.+\d{3,4}-\d{4} - reject
^https?:\/\/gw\.alicdn\.com\/tps\/.+\d{3,4}-\d{4} - reject
# >> Ximalaya
^https?:\/\/adse.+\.com\/[a-z]{4}\/loading\?appid= - reject
^https?:\/\/adse\.ximalaya\.com\/ting\/feed\?appid= - reject
^https?:\/\/adse\.ximalaya\.com\/ting\/loading\?appid= - reject
^https?:\/\/adse\.ximalaya\.com\/ting\?appid= - reject
^https?:\/\/fdfs\.xmcdn\.com\/group21\/M03\/E7\/3F\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group21\/M0A\/95\/3B\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group22\/M00\/92\/FF\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group22\/M05\/66\/67\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group22\/M07\/76\/54\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group23\/M01\/63\/F1\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group23\/M04\/E5\/F6\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group23\/M07\/81\/F6\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group23\/M0A\/75\/AA\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group24\/M03\/E6\/09\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group24\/M07\/C4\/3D\/ - reject
^https?:\/\/fdfs\.xmcdn\.com\/group25\/M05\/92\/D1\/ - reject
# >> Yahoo!
^https?:\/\/m\.yap\.yahoo\.com\/v18\/getAds\.do - reject
# >> YOUKU
^https?:\/\/.+\.mp4\?ccode=0902 - reject
^https?:\/\/.+\.mp4\?sid= - reject
# >> Youtube++
^https?:\/\/api\.catch\.gift\/api\/v3\/pagead\/ - reject
# >> Zhihu
^https?:\/\/www\.zhihu\.com\/api\/v4\/community-ad\/ - reject
^https?:\/\/api\.zhihu\.com\/real_time_launch - reject
^https?:\/\/api\.zhihu\.com\/launch - reject


# 重定向 HTTP 请求或者篡改请求 Header
[Header Rewrite]
^https?://www\.zhihu\.com header-replace User-Agent Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/11.1 Safari/605.1.15

[SSID Setting]
# 连接到 Apple Store 的 Wi-Fi 网络时 Surge 暂停工作
# 需要 Web 验证登录的 Wi-Fi 网络以及路由器已经科学上网的 Surge 挂起
"Apple Store" suspend=true
# 计费网络模式, 当连接到热点名为 iPhone X 的网络时自动切换为计费模式
"iPhone X" cellular-mode=true

[MITM]
hostname = *.chelaile.net.cn,*.douban.com,*.doubanio.com,*.iydsj.com,*.k.sohu.com,*.kingsoft-office-service.com,*.meituan.net,*.ofo.com,*.snssdk.com,*.uve.weibo.com,*.ydstatic.com,*.youdao.com,*.youtube.com,a.qiumibao.com,*.pstatp.com,api.jr.mi.com,api.kkmh.com,api.m.jd.com,api.smzdm.com,api.weibo.cn,api.xiachufang.com,api.zhihu.com,api5.futunn.com,app.10086.cn,app.58.com,app.wy.guahao.com,c.m.163.com,capi.mwee.cn,cdn.moji.com,client.mail.163.com,creditcard.ecitic.com,huichuan.sm.cn,i.ys7.com,iface.iqiyi.com,img.jiemian.com,ios.wps.cn,m.client.10010.com,m.creditcard.ecitic.com,m.ibuscloud.com,m.yap.yahoo.com,media.qyer.com,mlife.cmbchina.com,mob.mddcloud.com.cn,mp.weixin.qq.com,mrobot.pcauto.com.cn,mrobot.pconline.com.cn,ms.jr.jd.com,newsso.map.qq.com,open.qyer.com,r.inews.qq.com,rtbapi.douyucdn.cn,service.4gtv.tv,smkmp.96225.com,sp.kaola.com,static1.keepcdn.com,www.zhihu.com,*.rixcloudservice.com,*.wikipedia.org, *.wikiwand.com, *.zhuishushenqi.com, mi.gdt.qq.com, gw.alicdn.com, youtubei.googleapis.com, *.kfc.com, dspsdk.abreader.com, fdfs.xmcdn.com, adse.ximalaya.com, *.google-analytics.com, api.abema.io